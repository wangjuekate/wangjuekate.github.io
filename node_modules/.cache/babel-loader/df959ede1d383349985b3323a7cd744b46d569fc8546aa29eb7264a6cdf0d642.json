{"ast":null,"code":"'use strict';\n\nvar typeOf = require('kind-of');\nvar extend = require('extend-shallow');\n\n/**\n * Parse sections in `input` with the given `options`.\n *\n * ```js\n * var sections = require('{%= name %}');\n * var result = sections(input, options);\n * // { content: 'Content before sections', sections: [] }\n * ```\n * @param {String|Buffer|Object} `input` If input is an object, it's `content` property must be a string or buffer.\n * @param {Object} options\n * @return {Object} Returns an object with a `content` string and an array of `sections` objects.\n * @api public\n */\n\nmodule.exports = function (input, options) {\n  if (typeof options === 'function') {\n    options = {\n      parse: options\n    };\n  }\n  var file = toObject(input);\n  var defaults = {\n    section_delimiter: '---',\n    parse: identity\n  };\n  var opts = extend({}, defaults, options);\n  var delim = opts.section_delimiter;\n  var lines = file.content.split(/\\r?\\n/);\n  var sections = null;\n  var section = createSection();\n  var content = [];\n  var stack = [];\n  function initSections(val) {\n    file.content = val;\n    sections = [];\n    content = [];\n  }\n  function closeSection(val) {\n    if (stack.length) {\n      section.key = getKey(stack[0], delim);\n      section.content = val;\n      opts.parse(section, sections);\n      sections.push(section);\n      section = createSection();\n      content = [];\n      stack = [];\n    }\n  }\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var len = stack.length;\n    var ln = line.trim();\n    if (isDelimiter(ln, delim)) {\n      if (ln.length === 3 && i !== 0) {\n        if (len === 0 || len === 2) {\n          content.push(line);\n          continue;\n        }\n        stack.push(ln);\n        section.data = content.join('\\n');\n        content = [];\n        continue;\n      }\n      if (sections === null) {\n        initSections(content.join('\\n'));\n      }\n      if (len === 2) {\n        closeSection(content.join('\\n'));\n      }\n      stack.push(ln);\n      continue;\n    }\n    content.push(line);\n  }\n  if (sections === null) {\n    initSections(content.join('\\n'));\n  } else {\n    closeSection(content.join('\\n'));\n  }\n  file.sections = sections;\n  return file;\n};\nfunction isDelimiter(line, delim) {\n  if (line.slice(0, delim.length) !== delim) {\n    return false;\n  }\n  if (line.charAt(delim.length + 1) === delim.slice(-1)) {\n    return false;\n  }\n  return true;\n}\nfunction toObject(input) {\n  if (typeOf(input) !== 'object') {\n    input = {\n      content: input\n    };\n  }\n  if (typeof input.content !== 'string' && !isBuffer(input.content)) {\n    throw new TypeError('expected a buffer or string');\n  }\n  input.content = input.content.toString();\n  input.sections = [];\n  return input;\n}\nfunction getKey(val, delim) {\n  return val ? val.slice(delim.length).trim() : '';\n}\nfunction createSection() {\n  return {\n    key: '',\n    data: '',\n    content: ''\n  };\n}\nfunction identity(val) {\n  return val;\n}\nfunction isBuffer(val) {\n  if (val && val.constructor && typeof val.constructor.isBuffer === 'function') {\n    return val.constructor.isBuffer(val);\n  }\n  return false;\n}","map":{"version":3,"names":["typeOf","require","extend","module","exports","input","options","parse","file","toObject","defaults","section_delimiter","identity","opts","delim","lines","content","split","sections","section","createSection","stack","initSections","val","closeSection","length","key","getKey","push","i","line","len","ln","trim","isDelimiter","data","join","slice","charAt","isBuffer","TypeError","toString","constructor"],"sources":["/Users/katewang/Library/CloudStorage/Dropbox/Business_Ideas/GithubWiki_LearningSharing/wangjuekate.github.io/node_modules/section-matter/index.js"],"sourcesContent":["'use strict';\n\nvar typeOf = require('kind-of');\nvar extend = require('extend-shallow');\n\n/**\n * Parse sections in `input` with the given `options`.\n *\n * ```js\n * var sections = require('{%= name %}');\n * var result = sections(input, options);\n * // { content: 'Content before sections', sections: [] }\n * ```\n * @param {String|Buffer|Object} `input` If input is an object, it's `content` property must be a string or buffer.\n * @param {Object} options\n * @return {Object} Returns an object with a `content` string and an array of `sections` objects.\n * @api public\n */\n\nmodule.exports = function(input, options) {\n  if (typeof options === 'function') {\n    options = { parse: options };\n  }\n\n  var file = toObject(input);\n  var defaults = {section_delimiter: '---', parse: identity};\n  var opts = extend({}, defaults, options);\n  var delim = opts.section_delimiter;\n  var lines = file.content.split(/\\r?\\n/);\n  var sections = null;\n  var section = createSection();\n  var content = [];\n  var stack = [];\n\n  function initSections(val) {\n    file.content = val;\n    sections = [];\n    content = [];\n  }\n\n  function closeSection(val) {\n    if (stack.length) {\n      section.key = getKey(stack[0], delim);\n      section.content = val;\n      opts.parse(section, sections);\n      sections.push(section);\n      section = createSection();\n      content = [];\n      stack = [];\n    }\n  }\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var len = stack.length;\n    var ln = line.trim();\n\n    if (isDelimiter(ln, delim)) {\n      if (ln.length === 3 && i !== 0) {\n        if (len === 0 || len === 2) {\n          content.push(line);\n          continue;\n        }\n        stack.push(ln);\n        section.data = content.join('\\n');\n        content = [];\n        continue;\n      }\n\n      if (sections === null) {\n        initSections(content.join('\\n'));\n      }\n\n      if (len === 2) {\n        closeSection(content.join('\\n'));\n      }\n\n      stack.push(ln);\n      continue;\n    }\n\n    content.push(line);\n  }\n\n  if (sections === null) {\n    initSections(content.join('\\n'));\n  } else {\n    closeSection(content.join('\\n'));\n  }\n\n  file.sections = sections;\n  return file;\n};\n\nfunction isDelimiter(line, delim) {\n  if (line.slice(0, delim.length) !== delim) {\n    return false;\n  }\n  if (line.charAt(delim.length + 1) === delim.slice(-1)) {\n    return false;\n  }\n  return true;\n}\n\nfunction toObject(input) {\n  if (typeOf(input) !== 'object') {\n    input = { content: input };\n  }\n\n  if (typeof input.content !== 'string' && !isBuffer(input.content)) {\n    throw new TypeError('expected a buffer or string');\n  }\n\n  input.content = input.content.toString();\n  input.sections = [];\n  return input;\n}\n\nfunction getKey(val, delim) {\n  return val ? val.slice(delim.length).trim() : '';\n}\n\nfunction createSection() {\n  return { key: '', data: '', content: '' };\n}\n\nfunction identity(val) {\n  return val;\n}\n\nfunction isBuffer(val) {\n  if (val && val.constructor && typeof val.constructor.isBuffer === 'function') {\n    return val.constructor.isBuffer(val);\n  }\n  return false;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}